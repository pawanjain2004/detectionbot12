<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LegionM3 Control</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="page">
      <header>
        <h1>LegionM3 Control Center</h1>
        <p class="muted">Register a client and connect to a robot by UUID.</p>
      </header>

      <section class="panel">
        <h2>Server</h2>
        <div class="row">
          <label>Server URL</label>
          <input id="serverUrl" placeholder="https://legionm3.onrender.com" />
          <button id="saveServer">Save</button>
        </div>
      </section>

      <section class="panel">
        <h2>Client</h2>
        <div class="row">
          <label>Client ID</label>
          <input id="clientId" placeholder="client-123" />
          <button id="registerClient">Register Client</button>
        </div>
        <div class="row">
          <label>Online Robots</label>
          <select id="robotList"></select>
          <button id="refreshRobots">Refresh</button>
        </div>
      </section>

      <section class="panel">
        <h2>Connect</h2>
        <div class="row">
          <label>Robot UUID</label>
          <input id="robotId" placeholder="robot-001" />
          <button id="connect">Connect</button>
          <button id="disconnect" class="secondary">Disconnect</button>
        </div>
        <p id="status" class="muted">Status: idle</p>
      </section>

      <section class="grid">
        <div class="panel">
          <h2>Live Video</h2>
          <img id="video" class="video" alt="Live feed" />
          <label class="row">
            <input id="useMjpeg" type="checkbox" />
            Use MJPEG (HTTP)
          </label>
        </div>
        <div class="panel">
          <h2>Thermal</h2>
          <img id="thermalVideo" class="video" alt="Thermal feed" />
          <label class="row">
            <input id="useMjpegThermal" type="checkbox" />
            Use MJPEG (HTTP)
          </label>
        </div>
      </section>

      <section class="panel">
        <h2>Drive</h2>
        <p class="muted">Use W/A/S/D or the buttons. Release to stop.</p>
        <div class="row">
          <label>Speed (0-255)</label>
          <input id="speedDial" type="range" min="0" max="255" value="100" />
          <span id="speedValue" class="muted">100</span>
        </div>
        <div class="drive-grid">
          <div></div>
          <button id="driveUp">W</button>
          <div></div>
          <button id="driveLeft">A</button>
          <button id="driveStop" class="secondary">Stop</button>
          <button id="driveRight">D</button>
          <div></div>
          <button id="driveDown">S</button>
          <div></div>
        </div>
      </section>

      <section class="grid">
        <div class="panel">
          <h2>Telemetry</h2>
          <pre id="telemetry" class="telemetry">No data yet.</pre>
        </div>
        <div class="panel">
          <h2>Commands</h2>
          <div class="row">
            <input id="commandInput" placeholder="e.g. MOVE_FORWARD" />
            <button id="sendCommand">Send</button>
          </div>
          <pre id="commandLog" class="telemetry">No commands yet.</pre>
        </div>
      </section>

      <section class="panel">
        <h2>Logs</h2>
        <pre id="log" class="telemetry">Waiting for events...</pre>
      </section>
    </div>
    <script src="./app.js"></script>
  </body>
</html>
