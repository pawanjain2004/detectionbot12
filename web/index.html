<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Detection bot Control Center</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <section class="topbar">
      <div class="topbar-inner">
        <div class="topbar-brand">
          <p class="eyebrow">Mission Control</p>
          <h1>Detection bot</h1>
        </div>
        <div class="topbar-controls">
          <div class="top-item top-item-wide">
            <label>Server</label>
            <input id="serverUrl" value="https://detectionbot12-colo.onrender.com" readonly />
          </div>
          <div class="top-item">
            <label>Robot</label>
            <input id="robotId" value="Agraid" readonly />
          </div>
          <button id="connect">Connect</button>
          <button id="disconnect" class="secondary">Disconnect</button>
          <p id="status" class="status-pill">Status: idle</p>
        </div>
      </div>
    </section>

    <div class="page">
      <header class="hero compact-hero">
        <h2>Live Operations Dashboard</h2>
        <p class="muted">Dual camera monitoring, drive control, and telemetry monitoring.</p>
      </header>

      <section class="grid compact-grid">
        <div class="panel">
          <h2>Primary Camera</h2>
          <img id="video" class="video" alt="Live feed" />
          <label class="stream-option">
            <input id="useMjpeg" type="checkbox" />
            Use MJPEG (HTTP)
          </label>
        </div>
        <div class="panel">
          <h2>Thermal Camera</h2>
          <img id="thermalVideo" class="video" alt="Thermal feed" />
          <label class="stream-option">
            <input id="useMjpegThermal" type="checkbox" />
            Use MJPEG (HTTP)
          </label>
        </div>
      </section>

      <section class="panel control-panel">
        <h2>Drive Control</h2>
        <p class="muted">Use W/A/S/D or the buttons. Release to stop.</p>
        <div class="row compact speed-row">
          <label for="speedDial">Speed (0-255)</label>
          <input id="speedDial" type="range" min="0" max="255" value="100" />
          <span id="speedValue" class="muted">100</span>
        </div>
        <div class="drive-grid">
          <div></div>
          <button id="driveUp">W</button>
          <div></div>
          <button id="driveLeft">A</button>
          <button id="driveStop" class="secondary">Stop</button>
          <button id="driveRight">D</button>
          <div></div>
          <button id="driveDown">S</button>
          <div></div>
        </div>
      </section>

      <section class="grid compact-grid">
        <div class="panel">
          <h2>Telemetry Feed</h2>
          <div class="metrics-grid">
            <div class="metric-card">
              <p class="metric-label">Temperature</p>
              <p id="metricTemp" class="metric-value">--</p>
              <p class="metric-unit">Â°C</p>
            </div>
            <div class="metric-card">
              <p class="metric-label">Humidity</p>
              <p id="metricHumidity" class="metric-value">--</p>
              <p class="metric-unit">%RH</p>
            </div>
            <div class="metric-card">
              <p class="metric-label">Methane</p>
              <p id="metricMethane" class="metric-value">--</p>
              <p class="metric-unit">ppm</p>
            </div>
            <div class="metric-card">
              <p class="metric-label">Ammonia</p>
              <p id="metricAmmonia" class="metric-value">--</p>
              <p class="metric-unit">ppm</p>
            </div>
            <div class="metric-card">
              <p class="metric-label">Alcohol</p>
              <p id="metricAlcohol" class="metric-value">--</p>
              <p class="metric-unit">ppm</p>
            </div>
          </div>

          <div class="row compact record-row">
            <button id="toggleRecording">Start record data</button>
            <button id="downloadCsv" class="secondary" disabled>Download CSV</button>
            <span id="recordingStatus" class="muted">Not recording</span>
            <span id="lastTelemetryTs" class="muted">Last update: --</span>
          </div>
        </div>
        <div class="panel">
          <h2>Manual Commands</h2>
          <div class="row compact">
            <input id="commandInput" placeholder="e.g. MOVE_FORWARD" />
            <button id="sendCommand">Send</button>
          </div>
          <pre id="commandLog" class="telemetry">No commands yet.</pre>
        </div>
      </section>
    </div>
    <script src="./app.js"></script>
  </body>
</html>
